//Was ich an dir liebe!:
const appleObj = {
  apple1: "Apfel 1 von 10:\n\nHallo mein Engel,\ndas ist Apfel 1 von 10. Ich m√∂chte dich auf eine Reise mitnehmen, auf welcher ich dir gestehe, wie sehr ich dich liebe. Ich m√∂chte dich an Geschichten erinnern, und dir das Gef√ºhl vermitteln, welches ich beim Bauen dieser Website empfunden habe.\n\nIch liebe dich einfach √ºber alles und hoffe, dass dir das Ganze gef√§llt.\nDein Ehemann!",
  apple2: "Apfel 2 von 10:\n\nJedes Mal, wenn ich in deine Augen schaue, sehe ich nicht nur dich. Ich sehe eine Zukunft. Ich sehe <b>unsere</b> Zukunft. Ich sehe ein Leben voll Freude, voll Liebe und vor allem voll Freiheit.\n\nWir haben so sehr gelernt, was wir in der Beziehung wollen, was wir im Leben wollen, aber auch was wir von dem anderen brauchen. Ich kenne dich besser als jeden Menschen auf der Welt, aber es wird kein Tag vergehen, an welchem ich nicht versuchen werde dich noch besser kennenzulernen. Ich wei√ü der Satz klingt komisch, aber ich m√∂chte damit ausdr√ºcken, wie wichtig du mir bist und wie sehr ich all deine Facetten kennen will. Du bist das beste was mir je passiert ist ‚ù§",
  apple3: "Apfel 3 von 10:\n\nHier habe ich mir etwas √ºberlegt. Wie du siehst, sind dort unten 6 Karten.\nHier ist dein MEMORY Geschick gefragt üòç\n\nDas ist das was so lange gedauert hat",
  apple4: "Apfel 4 von 10:\n\nEs gibt auf der Welt niemanden, der mich so herzlich zum Lachen bringen kann wie du. Ja manchmal √ºber dich, so ist das nunmal. Da kann man nix machen. Aber meistens weil du entweder lustige Dinge sagst, oder ich es aber so sehr genie√üe, dir zuzuh√∂ren, dass ich davon so gl√ºcklich bin, dass ich lache. Niemand auf der Welt hat diesen Effekt auf mich. Du bist atemberaubend und einfach eine absolut perfekte Ehefrau!",
  apple5: "Apfel 5 von 10:\n\nAuch ein wenig Eigenlob geh√∂rt in eine Liebeserkl√§rung von mir, denkst du nicht?\n\nIn der Zeit mit dir hat sich mein Leben sehr ver√§ndert. Ich bin nicht nur ein gestandener Mann geworden, nein ich wei√ü auch besser denn je, wer ich bin. Ich habe den mit Abstand besten Job der Welt ergattert, nur weil du mich wahnsinnig supportet hast, dahinter zu bleiben, mich anzustrengen und die brutale Testaufgabenwoche durchzuziehen. Du hast mir gezeigt, dass es im Leben mehr als nur chillen gibt. Du hast mir gezeigt, dass meine Zukunft atemberaubend sch√∂n ist. Aber noch viel wichtiger, ich werde sie gemeinsam mit dir bestreiten d√ºrfen. Ich bin der Mann geworden, der ich immer sein wollte und das habe ich nur dir zu verdanken",
  apple6: "Apfel 6 von 10:\n\nEs gibt eine Sache, die ich dir viel zu selten sage. Ich m√ºsste dich 15 Mal am Tag anschreien, damit du das endlich auch denkst. Du bist mit Abstand der sch√∂nste Mensch der Welt. Nicht nur √§u√üerlich, sondern auch innerlich. Du strahlst mich mit einer Freude und W√§rme an, welche auch den k√§ltesten und gr√∂√üten Eisberg zum schmelzen br√§chte. Ich freue mich darauf weiterhin jeden Tag aufs Neue mit dir daran zu arbeiten, dass du deinen K√∂rper so siehst wie ich ihn sehe. Au√üerdem sind wir auf einer unglaublichen Reise unseren K√∂rper nachhaltig zu ver√§ndern. Ich bin wahnsinnig stolz auf dich und uns beide",
  apple7: "Apfel 7 von 10:\n\nIch war in meiner Jugend hin und wieder mal in Urlauben. Viele coole Orte, lustige Menschen und Spa√ü. Aber keiner dieser Urlaube kommt an unseren Urlaub in K√∂ln ran. Die N√§chte im Hotel, die viel zu gro√üe Hitze, Phantasialand, unser K√∂ln Lieblings All you can eat, geile Klamotten/Schuhe und viel viel Zeit nur mit dir, ohne die Sorgen des Alltags. All das hat diesen Urlaub zu etwas ganz besonderem gemacht. Und die CHIAPAS! Ich hatte Anfangs soooo Angst bei dem hohen Fall. Und irgendwann schaffen wir es sicherlich auch noch in das Aqualand",
  apple8: "Apfel 8 von 10:\n\nIn meinem Leben gab es viele Menschen die mir Liebe gaben. Viel Aufmerksamkeit und einfach viele Menschen. Aber beinahe keiner dieser Menschen (meine Family) hat mir jemals so viel davon geschenkt wie du. Du himmelst mich an und gibst immer alles f√ºr mich. Das m√∂chte ich hiermit einfach mal appreciaten. Ich bemerke es und wei√ü es mehr zu sch√§tzen, als ich dir jemals mit Worten sagen k√∂nnte. Allein zu Jahrestagen, in der geplanten Hochzeitsnacht, und auch ansonsten andauernd zwischendurch. Du kochst f√ºr mich fantastisches gesundes Essen, ich habe immer √ºberall alles liegen was ich brauche, wenn ich etwas mache. Du denkst im Vorraus, du planst, du investiert so unfassbar viel. Ich liebe dich √ºber alles meine Ehefrau",
  apple9: "Apfel 9 von 10:\n\n",
  apple10: "Apfel 10 von 10:\n\n",
};

const memoryPics = {
  apple1: "./pic/IMG-20220415-WA0154(1).jpg",
  apple2: "./pic/20241128_160136.jpg",
  apple4: "./pic/20241117_181725.jpg",
  apple5: "./pic/IMG_20220806_120651_449.webp",
  apple6: "./pic/20230211_163223.jpg",
  apple7: "./pic/IMG-20231111-WA0052.jpg",
  apple8: "./pic/20230422_120834.jpg",
  apple9: "./pic/",
  apple10: "./pic/",
}

const cardObj = {
  card1: {
    img: "./pic/20250223_120810.jpg",
    alt: "Stoned auf dem Balkon.",
  },
  card2: {
    img: "./pic/FB_IMG_1743881655983.jpg",
    alt: "Wir beide bei dem first Look.",
  }, 
  card3: {
    img: "./pic/alle Tiere Hintergrund.jpg",
    alt: "Alle Tieris.",
  }, 
  card4: {
    img: "./pic/20250223_120810.jpg",
    alt: "Stoned auf dem Balkon.",
  },
  card5: {
    img: "./pic/alle Tiere Hintergrund.jpg",
    alt: "Alle Tieris.",
  }, 
  card6: {
    img: "./pic/FB_IMG_1743881655983.jpg",
    alt: "Wir beide bei dem first Look.",
  }, 
}

const apples = document.querySelectorAll(".apple");
let firstApple = true;
let appleCounter = 0;
let lastAppleSeen = false;
let memorySolvedCounter = 0;
let memoryCardCounter = 0;

function openLightbox(content) {
  const lightbox = document.getElementById('lightbox');
  const textContent = document.getElementById('text-content');
  const memoryContainer = document.getElementById('memoryContainer');

  lightbox.style.display = 'flex';

  if (content.startsWith("Apfel 3 von 10:") && memoryContainer) {
    memoryContainer.style.display = 'flex';
  } else {
    memoryContainer.style.display = 'none'; // Falls anderer Apfel, Memory verstecken
  }

  const htmlContent = content.replace(/\n/g, '<br>');
  textContent.innerHTML = htmlContent;

  appleCounter++;
}

function closeLightbox() {
  const lightbox = document.getElementById("lightbox");
  const lightboxText = document.getElementById("lightbox-text");
  const memoryContainer = document.getElementById('memoryContainer');
  const textContent = document.getElementById("text-content");

  if (!textContent.innerText.startsWith("Bitte erledige noch Apfel Nummer 3 ‚ù§")){
    if(appleCounter >= 10){
      if (memorySolvedCounter >= 3 && !lastAppleSeen ) {
        setTimeout(() => {
          openLightbox("Ich sage es nur ungerne, aber jetzt hast du alle gesehen. Ich hoffe du konntest diese kleine Seite genie√üen. Wenn du m√∂chtest arbeite ich von Zeit zu Zeit weiter daran üòç Du bist die allerbeste!\n\nMEINE EHEFRAU!");
          lastAppleSeen = true;
          return;
        }, "700");
      } else if (lastAppleSeen && memorySolvedCounter <= 2){
        setTimeout(() => {
          openLightbox("Bitte erledige noch Apfel Nummer 3 ‚ù§");
          lastAppleSeen = true;
          return
        }, "700");
      }
    }
  }

  if (lightbox) {
    lightbox.style.display = "none";
  }

  if (memoryContainer) {
    memoryContainer.style.display = 'none';
  }

  if (firstApple) {
    makeAppleAppear();
    firstApple = false;
  }

  document.getElementById("pics").src = "";


}

apples.forEach(button => {
  button.addEventListener('click', () => {
    changeAppleBackground(button);
    
    if(!!memoryPics[button.id]){
      document.getElementById("pics").src = memoryPics[button.id];
    }

    openLightbox(appleObj[button.id]);
  });
});

document.getElementById("close-button").addEventListener("click", closeLightbox);

// Klick au√üerhalb schlie√üt auch
document.getElementById("lightbox").addEventListener("click", (e) => {
  if (e.target.id === "lightbox") {
    closeLightbox();
  }
});

function makeAppleAppear() {
  apples.forEach(apple => {
    if (apple.id === "apple1") {
      return; // Apfel 1 bleibt wie er ist
    }
    apple.style.display = "block"; // Direkt auf das Element anwenden
  });
}

function changeAppleBackground(button){
  document.getElementById(button.id).style.backgroundColor = 'gray';

  // Zus√§tzlich eine CSS-Klasse erstellen und anh√§ngen f√ºr ::before und ::after
  const style = document.createElement('style');
  style.innerHTML = `
    #${button.id}::before, 
    #${button.id}::after {
      background-color: gray;
    }
  `;
  document.head.appendChild(style);
}

const cards = document.querySelectorAll(".card");

let firstCard = null;
let secondCard = null;

cards.forEach(card => {
  card.addEventListener("click", () => {
    // Verhindern, dass auf die Karte geklickt wird, wenn sie bereits umgedreht ist
    if (memoryCardCounter < 2 && !card.classList.contains("flipped")) {
      const cardFront = card.querySelector(".card-front");
      const cardBack = card.querySelector(".card-back");

      // Zeige die Vorderseite an, blende die R√ºckseite aus
      cardFront.style.display = "block";
      cardBack.style.display = "none";
      card.classList.add("flipped"); // Markiere die Karte als umgedreht

      if (memoryCardCounter === 0) {
        // Die erste Karte
        firstCard = card;
        memoryCardCounter++;
      } else if (memoryCardCounter === 1) {
        // Die zweite Karte
        secondCard = card;
        memoryCardCounter++;

        // √úberpr√ºfe, ob die 'src' der Bilder gleich sind
        const firstCardImage = firstCard.querySelector(".card-front img").src;
        const secondCardImage = secondCard.querySelector(".card-front img").src;

        if (firstCardImage === secondCardImage) {
          console.log("Die Karten stimmen √ºberein!");
          // Die Karten stimmen √ºberein, setze sie in einen "abgeglichenen" Zustand (z.B. keine R√ºckseite mehr zeigen)
          firstCard.removeEventListener("click", card.click);
          secondCard.removeEventListener("click", card.click);

          memorySolvedCounter++;

          // Setze die Karten f√ºr die n√§chste Auswahl zur√ºck
          firstCard = null;
          secondCard = null;
          memoryCardCounter = 0;
        } else {
          console.log("Die Karten stimmen nicht √ºberein!");
          // Die Karten stimmen nicht √ºberein, blende sie nach einer Verz√∂gerung zur√ºck
          setTimeout(() => {
            firstCard.querySelector(".card-front").style.display = "none";
            firstCard.querySelector(".card-back").style.display = "block";
            secondCard.querySelector(".card-front").style.display = "none";
            secondCard.querySelector(".card-back").style.display = "block";
            firstCard.classList.remove("flipped");
            secondCard.classList.remove("flipped");

            // Setze die Karten f√ºr die n√§chste Auswahl zur√ºck
            firstCard = null;
            secondCard = null;
            memoryCardCounter = 0;
          }, 1000); // Warte 1 Sekunde, bevor die R√ºckseiten wieder angezeigt werden
        }
      }

      if (memorySolvedCounter === 3){
        changeMemoryLightBox();
      }
    }
  });
});

function changeMemoryLightBox() {
  
  document.getElementById("memoryContainer").style.display = "none";

  const textContent = document.getElementById("text-content");

  textContent.innerHTML = "Apfel 3 von 10:<br><br>Wow! Du hast es gel√∂st. Ich liebe dich mein Engel ‚ù§";
}

